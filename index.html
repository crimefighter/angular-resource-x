<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>$resource_ by luciano7</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>$resource_</h1>
          <h2>AngularJS Resource Extension</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/luciano7/resource-generator/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/luciano7/resource-generator/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/luciano7/resource-generator" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a id="angular-resourcegenerator" class="anchor" href="#angular-resourcegenerator" aria-hidden="true"><span class="octicon octicon-link"></span></a>Angular ResourceGenerator</h1>

<p>AngularJS Resource Extension</p>

<h2>
<a id="about" class="anchor" href="#about" aria-hidden="true"><span class="octicon octicon-link"></span></a>About</h2>

<p>Resource Generator wraps a call to $resource and provides some extra functionality. The provider can be configured with a base API URL, default parameters, extenders, methods and statics.</p>

<p>While $resource is amazing in itself, we wanted to provide a more declarative approach to $resource management. Typically if you wanted more functions out of your resources, you'd have to create a service that instantiated a resource and then managed the resource with methods on that service. Resource Generator creates one stop call for both your $resource and its management.</p>

<p>Here's how your resource definition might look like:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> Cars <span class="pl-k">=</span> ResourceGenerator(<span class="pl-s"><span class="pl-pds">'</span>cars/:id/<span class="pl-pds">'</span></span>, {<span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>@id<span class="pl-pds">'</span></span>}, [
  {
    <span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>owners<span class="pl-pds">'</span></span>,
    <span class="pl-s"><span class="pl-pds">'</span>url<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>owners/:id/<span class="pl-pds">'</span></span>,
    <span class="pl-s"><span class="pl-pds">'</span>params<span class="pl-pds">'</span></span><span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>@id<span class="pl-pds">'</span></span>},
    <span class="pl-s"><span class="pl-pds">'</span>link<span class="pl-pds">'</span></span><span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">'</span>car_id<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span>}
  }
])
  .<span class="pl-c1">method</span>(<span class="pl-s"><span class="pl-pds">'</span>paint<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">color</span>){
    <span class="pl-v">this</span>.<span class="pl-c1">color</span> <span class="pl-k">=</span> color;
    <span class="pl-k">return</span> <span class="pl-v">this</span>.$save();
  }
  .<span class="pl-c1">method</span>(<span class="pl-s"><span class="pl-pds">'</span>turnOn<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(){
    <span class="pl-v">this</span>.on <span class="pl-k">=</span> <span class="pl-c1">true</span>;
  });

<span class="pl-k">var</span> camaro <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Cars</span>();
camaro.paint(<span class="pl-s"><span class="pl-pds">'</span>yellow<span class="pl-pds">'</span></span>);</pre></div>

<h3>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuration</h3>

<p>The ResourceGenerator provider takes in 4 arguments:</p>

<ul>
<li>
<code>url</code>: the URL to get this resource from.</li>
<li>
<code>paramDefaults</code>: the hash of parameter defaults for this resource, exactly like $resource. Will also take a function that returns an object.</li>
<li>
<code>children</code>: child endpoints. Configured like so:</li>
</ul>

<div class="highlight highlight-javascript"><pre>  {
    <span class="pl-c">//A name for your child endpoint.</span>
    <span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>owners<span class="pl-pds">'</span></span>, 
    <span class="pl-c">//URL for this endpoint.</span>
    <span class="pl-s"><span class="pl-pds">'</span>url<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>carowners/{id}<span class="pl-pds">'</span></span>, 
    <span class="pl-c">//Exactly like the parent, will take an object or a function that returns an object.</span>
    <span class="pl-s"><span class="pl-pds">'</span>params<span class="pl-pds">'</span></span><span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>@id<span class="pl-pds">'</span></span>}, 
    <span class="pl-c">//Object that has as a key a query field on this child and as a value a variable name to fetch from its parent.</span>
    <span class="pl-s"><span class="pl-pds">'</span>link<span class="pl-pds">'</span></span><span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">'</span>car_id<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span>} 
  }</pre></div>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>To simply create a standard $resource just call ResourceGenerator with only the first 2 parameters:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-c">//creates a Cars resource and binds the "id" query field to the object's id</span>
<span class="pl-k">var</span> Cars <span class="pl-k">=</span> ResourceGenerator(<span class="pl-s"><span class="pl-pds">'</span>cars/:id/<span class="pl-pds">'</span></span>, {<span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>@id<span class="pl-pds">'</span></span>});</pre></div>

<p>As you can expect, a $resource is returned pointing to the cars endpoint and matches the id url query field with the object's id.</p>

<p>Children endpoints are automatically added to the instance of the parent's resource. Like so:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> Cars <span class="pl-k">=</span> ResourceGenerator(<span class="pl-s"><span class="pl-pds">'</span>cars/:id/<span class="pl-pds">'</span></span>, {<span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>@id<span class="pl-pds">'</span></span>}, [
  {
    <span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>owners<span class="pl-pds">'</span></span>,
    <span class="pl-s"><span class="pl-pds">'</span>url<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>owners/:id/<span class="pl-pds">'</span></span>,
    <span class="pl-s"><span class="pl-pds">'</span>params<span class="pl-pds">'</span></span><span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>@id<span class="pl-pds">'</span></span>},
    <span class="pl-s"><span class="pl-pds">'</span>link<span class="pl-pds">'</span></span><span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">'</span>car_id<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span>}
  }
]);

<span class="pl-c">//now when we get an instance of Car we also get some helper variables:</span>
<span class="pl-k">var</span> prius <span class="pl-k">=</span> Cars.get({<span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span><span class="pl-k">:</span><span class="pl-c1">1</span>});
<span class="pl-k">var</span> priusOwners;

<span class="pl-c">//we wait for the car to be fetched</span>
prius.$promise.then(<span class="pl-k">function</span>(){
  <span class="pl-c">//$owners automatically get added to prius with their "car_id" query param set to the prius' id.</span>
  priusOwners <span class="pl-k">=</span> prius.$owners.query();
});</pre></div>

<h3>
<a id="methods" class="anchor" href="#methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Methods</h3>

<p>Methods allow the manipulation of resource instantiated with your resource-generator. Example:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> Cars <span class="pl-k">=</span> ResourceGenerator(<span class="pl-s"><span class="pl-pds">'</span>cars/:id/<span class="pl-pds">'</span></span>, {<span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>@id<span class="pl-pds">'</span></span>}).<span class="pl-c1">method</span>(<span class="pl-s"><span class="pl-pds">'</span>paint<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">color</span>){
  <span class="pl-v">this</span>.<span class="pl-c1">color</span> <span class="pl-k">=</span> color;
  <span class="pl-k">return</span> <span class="pl-v">this</span>.$save();
}

<span class="pl-c">//then anywhere you want to use the Cars</span>
<span class="pl-k">var</span> prius <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Cars</span>();
prius.paint(<span class="pl-s"><span class="pl-pds">'</span>blue<span class="pl-pds">'</span></span>);</pre></div>

<h3>
<a id="statics" class="anchor" href="#statics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Statics</h3>

<p>Statics (static methods) however, work in the non-instantiated ResourceGenerator, like so:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> Cars <span class="pl-k">=</span> ResourceGenerator(<span class="pl-s"><span class="pl-pds">'</span>cars/:id/<span class="pl-pds">'</span></span>, {<span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>@id<span class="pl-pds">'</span></span>}).static(<span class="pl-s"><span class="pl-pds">'</span>getAllRedCars<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(){
  <span class="pl-k">return</span> <span class="pl-v">this</span>.query({color<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>red<span class="pl-pds">'</span></span>});
}

<span class="pl-c">//now to get that list of red cars you call</span>
<span class="pl-k">var</span> redCars <span class="pl-k">=</span> Cars.getAllRedCars();</pre></div>

<h3>
<a id="extends" class="anchor" href="#extends" aria-hidden="true"><span class="octicon octicon-link"></span></a>Extends</h3>

<p>Extends are simply <em>both</em> a method and a static - as in they work on both instantiated and non-instantiated versions of your resource object.</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> Cars <span class="pl-k">=</span> ResourceGenerator(<span class="pl-s"><span class="pl-pds">'</span>cars/:id/<span class="pl-pds">'</span></span>, {<span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>@id<span class="pl-pds">'</span></span>}).extend(<span class="pl-s"><span class="pl-pds">'</span>toggleIgnition<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">car</span>){
  <span class="pl-k">var</span> useCar <span class="pl-k">=</span> (<span class="pl-v">this</span>.<span class="pl-c1">id</span>) <span class="pl-k">?</span> this <span class="pl-k">:</span> car;
  <span class="pl-c">//toggle between on/off</span>
  useCar.on <span class="pl-k">=</span> <span class="pl-k">!</span>useCar.on;

  <span class="pl-k">return</span> useCar.$save();
}

<span class="pl-c">//now we can use that method with an instantiated Car</span>
<span class="pl-k">var</span> prius <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Cars</span>({<span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>prius<span class="pl-pds">'</span></span>});
<span class="pl-c">//turn car on</span>
prius.toggleIgnition();
<span class="pl-c">//and turn it back off, using the non-instantiated Cars</span>
Cars.toggleIgnition(prius);</pre></div>

<h3>
<a id="other-helper-stuff" class="anchor" href="#other-helper-stuff" aria-hidden="true"><span class="octicon octicon-link"></span></a>Other Helper Stuff</h3>

<h4>
<a id="function-params" class="anchor" href="#function-params" aria-hidden="true"><span class="octicon octicon-link"></span></a>Function Params</h4>

<p>You can use a function in place of default params that returns the params. This function is $injected but only when called, so it's safe to set up during the config phase of your app. Like so:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-c">//modifying the default params in this case, but this works for any time you pass in a parameters list</span>
<span class="pl-c">//In this example, I want to attach a user's login role to all calls made from my resources.</span>
<span class="pl-c1">ResourceGeneratorProvider.defaults</span>.<span class="pl-en">params</span> <span class="pl-k">=</span> <span class="pl-k">function</span>(<span class="pl-smi">RolesService</span>){
  <span class="pl-k">if</span>(RolesService.myRole){
    <span class="pl-k">return</span> {<span class="pl-s"><span class="pl-pds">'</span>user_role<span class="pl-pds">'</span></span><span class="pl-k">:</span> RolesService.myRole};
  }
}</pre></div>

<h4>
<a id="getwithchildren" class="anchor" href="#getwithchildren" aria-hidden="true"><span class="octicon octicon-link"></span></a>GetWithChildren()</h4>

<p>GetWithChildren() is a default method for all ResourceGenerators. It will parallel load all of the resource's childrens and save their result to the resource. Like so:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> Cars <span class="pl-k">=</span> ResourceGenerator(<span class="pl-s"><span class="pl-pds">'</span>cars/:id/<span class="pl-pds">'</span></span>, {<span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>@id<span class="pl-pds">'</span></span>}, [
  {
    <span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>owners<span class="pl-pds">'</span></span>,
    <span class="pl-s"><span class="pl-pds">'</span>url<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>owners/:id/<span class="pl-pds">'</span></span>,
    <span class="pl-s"><span class="pl-pds">'</span>params<span class="pl-pds">'</span></span><span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>@id<span class="pl-pds">'</span></span>},
    <span class="pl-s"><span class="pl-pds">'</span>link<span class="pl-pds">'</span></span><span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">'</span>car_id<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span>}
  }
]);

<span class="pl-k">var</span> prius <span class="pl-k">=</span> Cars.getWithChildren({<span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span><span class="pl-k">:</span><span class="pl-c1">5</span>});
<span class="pl-k">var</span> priusOwners;

prius.$promise.then(<span class="pl-k">function</span>(){
  priusOwners <span class="pl-k">=</span> prius._owners;
});</pre></div>
        </section>

        <footer>
          $resource_ is maintained by <a href="https://github.com/luciano7">luciano7</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>